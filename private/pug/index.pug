doctype html

html(ng-app="spgill.EnigmaWeb")

    head
        //- All the meta tags
        meta(charset="utf-8")
        meta(http-equiv="X-UA-Compatible" content="IE=edge")
        meta(name="description" content="")
        meta(name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no")
        meta(name="mobile-web-app-capable" content="yes")
        title Enigma Simulation

        //- Link icon and stylesheets
        link(rel="icon" href="/image/favicon.png")
        link(rel="stylesheet" href="/css/bower.css")
        link(rel="stylesheet" href="/css/index.css")
        link(rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons")

    body(
        ng-controller="MainController as main"
        ng-cloak
        md-theme="{{ main.bitmode ? 'byte' : 'normal' }}"
        )
        //- Scrollable content
        md-content(layout="column")

            //- Jumbotron with switch for mode
            div.jumbo(
                layout="column"
                layout-align="center center"
                layout-padding
                md-colors="{background: 'primary'}"
                )

                div(style="width: 1024px;")
                    a(href="http://spgill.me")
                        img(src="/image/spg.svg" style="height: 50px;")

                h1.md-display-4 {{ main.bitmode ? 'Bitnigma' : 'Enigma' }} Machine

                div(layout="row" layout-align="center center")
                    span Classic Simulation
                    md-switch(ng-model="main.bitmode" style="margin-left: 8px;")
                    span Byte Simulation

            //- Controls for normal mode
            div(ng-if="!main.bitmode" layout-padding flex)
                div.inner(
                    style="width: 1024px; margin-left: auto; margin-right: auto;"
                    layout="column"
                    layout-align="start stretch"
                    )
                    section
                        h2.nomargin
                            span(md-colors="{color: 'primary'}") 1
                            span . Choose three rotors and their initial settings

                        div(layout="row" layout-align="center center")
                            div(
                                ng-repeat="i in [0, 1, 2]"
                                flex
                                layout="row"
                                layout-align="start center"
                                )
                                md-input-container(flex)
                                    label Rotor {{ $index + 1 }}
                                    md-select(ng-model="main.classic_rotors[$index]" ng-disabled="main.classic_busy")
                                        md-option(
                                            ng-repeat="rotor in main.classic_rotor_list"
                                            value="{{ rotor[1] }}"
                                            ) {{ rotor[0] }}
                                md-input-container
                                    md-select(ng-model="main.classic_settings[$index]" ng-disabled="main.classic_busy")
                                        md-option(
                                            ng-repeat="letter in main.classic_abet"
                                            value="{{ letter }}"
                                            ) {{ letter }}
                                span.spacer(ng-if="!$last" md-colors="{color: 'primary'}") &#149;

                    section
                        h2.nomargin
                            span(md-colors="{color: 'primary'}") 2
                            span . Choose a reflector

                        div(layout="row" layout-align="start center")
                            md-input-container(flex)
                                label Reflector
                                md-select(ng-model="main.classic_reflector" ng-disabled="main.classic_busy")
                                    md-option(
                                        ng-repeat="ref in main.classic_reflector_list"
                                        value="{{ ref[1] }}"
                                        ) {{ ref[0] }}

                    section
                        h2.nomargin
                            span(md-colors="{color: 'primary'}") 3
                            span . Configure the plugboard

                        md-chips(
                            ng-model="main.classic_plugs"
                            readonly="true"
                            md-removable="true"
                            )

                        div(style="margin-bottom: 18px;" layout="row" layout-align="center center" layout-wrap)
                            md-button.md-fab(
                                ng-class="{'md-hue-3': main.classic_plugs_selected.indexOf(letter) >= 0}"
                                ng-click="main.classic_plug_click(letter)"
                                ng-disabled="main.classic_plug_disabled(letter)"
                                ng-repeat="letter in main.classic_abet"
                                ) {{ letter }}

                    section
                        h2.nomargin
                            span(md-colors="{color: 'primary'}") 4
                            span . Enter text to encrypt / decrypt

                        md-input-container.md-block(style="margin-bottom: 0;")
                            label Something secret...
                            textarea(ng-model="main.classic_text" ng-disabled="main.classic_busy" md-select-on-focus)


                    md-button.md-block.md-raised.md-primary(
                        ng-click="main.classic_go()"
                        ng-disabled="main.classic_busy || !main.classic_ready()"
                        style="align-self: stretch; margin-bottom: 48px;"
                        ) Go!

                    section
                        h2.nomargin
                            span A bit of background
                        p.
                            The enigma machine was an electro-mechanical cipher machine
                            invented by German engineer Arthur Scherbius towards the end of World War I.
                            It was designed to provide a means of encrypting
                            sensitive communications before the era of computers.
                            The machine was most (in)famously
                            used by the Nazi German Regime during World War II as a means
                            of keeping their communiqu√© secret while being
                            broadcast over common radio channels.

                        p.
                            The encryption of the enigma machine was eventually broken
                            by a team of mathematicians at Bletchly Park. Breaking
                            the encryption allowed the Allied forces to gain key
                            insights into the strategies and ongoings of the
                            Nazi military force. This breakthrough is credited
                            for helping to mark the turning point in World War
                            II. This breakthrough, thanks to the engineering wit
                            of Alan Turing, also gave birth to the first general-purpose
                            computing devices (eventually leading up to the modern
                            day computer).

                        p.
                            The enigma machine, though generally referred to as such,
                            is not a singular <em>the</em>, but rather a brand
                            covering a wide range of models produced and operated
                            in many countries during the 20th century,
                            all with similar or identical operation, but different
                            wiring patterns.

                        p.
                            This simulation is a very heavy abstraction of the
                            mechanics of the original enigma machines. It faithfully
                            emulates the interaction of rotors and wirings, but
                            I wouldn't expect it be 100% accurate to the original
                            mechanism. With this simulation, you can mix and match different rotor
                            and reflector wirings from across a wide range of different
                            enigma machines created through the 1900s.

                        p(layout="row" layout-align="center center")
                            md-button.md-primary(href="https://github.com/spgill/enigma" target="_blank") View the source on Github
                            span.spacer &#149;
                            md-button.md-primary(href="http://www.cryptomuseum.com/crypto/enigma/index.htm" target="_blank") Learn more about Enigma
                            span.spacer &#149;
                            md-button.md-primary(href="https://www.youtube.com/watch?v=G2_Q9FoD-oQ" target="_blank") A nifty video explanation



            //- Controls for bit mode
            div(ng-if="main.bitmode" layout-padding flex)
                div.inner(
                    style="width: 1024px; margin-left: auto; margin-right: auto;"
                    layout="column"
                    layout-align="center center"
                    )
                    h2.md-display-2
                        span WIP
                        span(md-colors="{color: 'primary'}") &nbsp;...&nbsp;
                        span check back later!

        script(src="/js/bower.js")
        script(src="/js/index.js")

        //- Google Analytics plugin
        script.
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-59759887-5', 'auto');
            ga('send', 'pageview');
